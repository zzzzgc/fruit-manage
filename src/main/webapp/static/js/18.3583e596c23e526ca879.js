webpackJsonp([18],{"+TYf":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"procurement-detail"},[r("table-search"),e._v(" "),r("table-list")],1)},s=[],o={render:a,staticRenderFns:s};t.a=o},"+git":function(e,t,r){"use strict";var a=r("woOf"),s=r.n(a),o=r("g7ZD");t.a={components:{},name:"procurement-search",created:function(){},data:function(){return{searchData:{user_name:"",user_phone:"",user_id:"",product_name:"",product_id:"",product_standard_name:"",product_standard_id:""}}},mounted:function(){this.search()},methods:{search:function(){o.c.$emit(o.g.search,s()({},this.searchData))},reset:function(){this.searchData.create_time=[],this.$refs.formSearch.resetFields(),this.searchData={},this.search()}}}},"/FVi":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"formSearch",staticClass:"form-search",attrs:{model:e.searchData,"label-width":"80px"}},[r("div",[r("el-form-item",{attrs:{label:"商品名称:",prop:"product_name"}},[r("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.searchData.product_name,callback:function(t){e.$set(e.searchData,"product_name",t)},expression:"searchData.product_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"商品编码",prop:"product_id"}},[r("el-input",{attrs:{placeholder:"请输入商品编码"},model:{value:e.searchData.product_id,callback:function(t){e.$set(e.searchData,"product_id",t)},expression:"searchData.product_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"规格名称",prop:"product_standard_name"}},[r("el-input",{attrs:{placeholder:"请输入规格名称"},model:{value:e.searchData.product_standard_name,callback:function(t){e.$set(e.searchData,"product_standard_name",t)},expression:"searchData.product_standard_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"规格编码",prop:"product_standard_id"}},[r("el-input",{attrs:{placeholder:"请输入规格编码"},model:{value:e.searchData.product_standard_id,callback:function(t){e.$set(e.searchData,"product_standard_id",t)},expression:"searchData.product_standard_id"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"采购姓名:",prop:"procurement_name"}},[r("el-input",{attrs:{placeholder:"请输入采购人姓名"},model:{value:e.searchData.user_name,callback:function(t){e.$set(e.searchData,"user_name",t)},expression:"searchData.user_name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"采购电话",prop:"procurement_phone"}},[r("el-input",{attrs:{placeholder:"请输入采购电话"},model:{value:e.searchData.user_phone,callback:function(t){e.$set(e.searchData,"user_phone",t)},expression:"searchData.user_phone"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"采购人ID",prop:"procurement_id"}},[r("el-input",{attrs:{placeholder:"请输入采购人编码"},model:{value:e.searchData.user_id,callback:function(t){e.$set(e.searchData,"user_id",t)},expression:"searchData.user_id"}})],1),e._v(" "),r("el-form-item",{staticClass:"search-action"},[r("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),r("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)},s=[],o={render:a,staticRenderFns:s};t.a=o},"0Nov":function(e,t,r){"use strict";var a=r("woOf"),s=r.n(a),o=r("/5sW"),i=r("g7ZD"),n=r("IAGr"),d=r("mtWM"),c=r.n(d);o.default.prototype.$ajax=c.a,t.a={name:"procurement",components:{pPlanDetail:function(e){r.e(33).then(function(){var t=[r("anrZ")];e.apply(null,t)}.bind(this)).catch(r.oe)}},created:function(){var e=this;i.c.$on(i.g.search,function(t){e.search(t)}),i.c.$on(i.g.showAddOrEdit,function(){e.getData(),e.successMsg("修改成功!")})},mounted:function(){this.getData()},data:function(){var e=localStorage.getItem(n.c.productPageSize);return{editCompName:"",showEdit:!1,isShowDialogExport:!1,editRowId:null,pPlanDate:"",tableData:[],selectIds:[],searchData:{},pageInfo:{pageNum:1,totalRec:0,pageSize:null==e?10:parseInt(e)},planDetailInfo:{prop:"ppd.create_time",order:"descending"},waitStatisticsOrderTotal:"",fileList3:[]}},methods:{search:function(e){this.resetPageInfo(),this.searchData=e,this.getData()},successMsg:function(e){this.$message({message:e,type:"success"})},warningMsg:function(e){this.$message({message:e,type:"warning"})},updatePPlan:function(e){var t=this;this.$http.post("/manage/procurement/plan/updatePPlan",{createTime:e.create_time}).then(function(e){!0===e.data&&t.successMsg("更新成功!")})},handleChange:function(e,t){this.exportExcel(e,t)},exportExcel:function(e,t){var r=this;void 0!==e.response&&this.$http.post("manage/procurement/plan/detail/uploaderExcelThree",{fileName:e.response,createTimeStr:this.$route.query.createTime}).then(function(e){r.getData(),r.successMsg("导入成功!")})},edit:function(e){this.editCompName="pPlanDetail",this.editRowId=e.id,this.showEdit=!0},resetPageInfo:function(){this.pageInfo.totalRec=0,this.pageInfo.pageNum=1},getData:function(){var e=this;this.searchData.create_time=this.$route.query.createTime,this.$http.post("/manage/procurement/plan/detail/getAllPPlanDetail",s()({},this.searchData,this.pageInfo,this.planDetailInfo)).then(function(t){null!==t.data.list&&t.data.list.length>0&&(e.waitStatisticsOrderTotal=t.data.list[0].waitStatisticsOrderTotal),e.pageInfo.totalRec=t.data.totalRow,e.tableData=t.data.list})},updatePPlanDetail:function(){var e=this;this.$http.post("/manage/procurement/plan/detail/updatePPlanDetail",{createTime:this.$route.query.createTime}).then(function(t){e.getData(),e.successMsg("更新成功!")})},createPPlanDetail:function(){},importPPlanDetail:function(){},handleSizeChange:function(e){this.pageInfo.pageSize=e,localStorage.setItem(n.c.productPageSize,e),this.getData()},handleCurrentChange:function(e){this.pageInfo.pageNum=e,this.getData()},selectChange:function(e){this.selectIds.splice(0,this.selectIds.length);for(var t=0;t<e.length;t++)this.selectIds.push(e[t].id)},sortChange:function(e){var t=(e.column,e.prop),r=e.order;t===this.planDetailInfo.prop&&r===this.planDetailInfo.order||(this.planDetailInfo.prop=t,this.planDetailInfo.order=r,this.resetPageInfo(),this.getData())},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}}}},"1Biq":function(e,t,r){"use strict";function a(e){r("dX9N")}Object.defineProperty(t,"__esModule",{value:!0});var s=r("MFG2"),o=r("+TYf"),i=r("VU/8"),n=a,d=i(s.a,o.a,!1,n,"data-v-9c342368",null);t.default=d.exports},Ebz4:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"",""])},FjYk:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table-list"},[r("div",{staticClass:"action",staticStyle:{color:"#606266","margin-left":"20px"}},[e._v("\n    待统计订单数据："),r("span",{staticStyle:{"text-align":"left",width:"30px",display:"inline-block"}},[e._v(e._s(""===e.waitStatisticsOrderTotal?0:e.waitStatisticsOrderTotal))]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){if(!("button"in t)&&e._k(t.keyCode,"navite",void 0,t.key))return null;e.updatePPlanDetail(t)}}},[e._v("更新采购计划")]),e._v(" "),r("el-upload",{staticClass:"upload-demo",staticStyle:{display:"inline-block","margin-left":"10px"},attrs:{action:e._uploadFilePath,"on-change":e.handleChange,"show-file-list":!1,"file-list":e.fileList3}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("导入采购单")])],1),e._v(" "),r("span",{staticStyle:{margin:"-15px 0 0 10px",color:"#999999","font-size":"14px"}},[e._v("Excel格式：商品名、规格名、规格编码、重量(斤)、报价、下单量、库存量、采购量、采购单价、下单备注")])],1),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":e.planDetailInfo,"highlight-current-row":""},on:{"selection-change":e.selectChange,"sort-change":e.sortChange}},[r("el-table-column",{attrs:{fixed:"",prop:"product_name",label:"商品名","min-width":"70"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"product_standard_name",label:"规格名","min-width":"70"}}),e._v(" "),r("el-table-column",{attrs:{prop:"product_standard_id",label:"规格编号","min-width":"70"}}),e._v(" "),r("el-table-column",{attrs:{prop:"sell_price",label:"报价","min-width":"70"}}),e._v(" "),r("el-table-column",{attrs:{prop:"product_standard_num",label:"下单数量","show-overflow-tooltip":"","min-width":"100"}}),e._v(" "),r("el-table-column",{attrs:{label:"库存数量","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.procurement_num+t.row.stock>=t.row.product_standard_num?r("span",{staticStyle:{color:"deepskyblue"}},[e._v(e._s(t.row.stock))]):r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.stock))])]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"procurement_num",label:"采购数量","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.procurement_num+t.row.stock>=t.row.product_standard_num?r("span",{staticStyle:{color:"deepskyblue"}},[e._v(e._s(t.row.procurement_num))]):r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.procurement_num))])]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"procurement_total_price",label:"实采总价","min-width":"50"}}),e._v(" "),r("el-table-column",{attrs:{label:"采购单价","min-width":"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.procurement_need_price>=t.row.sell_price?r("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.procurement_need_price))]):r("span",{staticStyle:{color:"deepskyblue"}},[e._v(e._s(t.row.procurement_need_price))])]}}])}),e._v(" "),r("el-table-column",{attrs:{sortable:"",prop:"userName",label:"采购人","min-width":"50"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{staticClass:"delete",attrs:{type:"text",size:"small"},nativeOn:{click:function(r){e.edit(t.row)}}},[e._v("修改")])]}}])})],1),e._v(" "),r("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"订单是否确认支付？",center:!0,visible:e.isShowDialogExport,width:"50%"},on:{"update:visible":function(t){e.isShowDialogExport=t}}},[r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.isShowDialogExport=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toPayMoney(e.order)}}},[e._v("确 定")])],1)]),e._v(" "),r("el-pagination",{staticClass:"table-pager",attrs:{"current-page":e.pageInfo.pageNum,"page-sizes":[10,20,50,100],"page-size":e.pageInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.pageInfo.totalRec},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r(e.editCompName,{tag:"component",attrs:{showDialog:e.showEdit,editRowId:e.editRowId},on:{"update:showDialog":function(t){e.showEdit=t}}})],1)},s=[],o={render:a,staticRenderFns:s};t.a=o},Jzhs:function(e,t,r){var a=r("Ebz4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("7a4cd530",a,!0)},MFG2:function(e,t,r){"use strict";var a=r("ySrP"),s=r("Z+s7");t.a={name:"procurement-detail",components:{tableList:a.a,tableSearch:s.a},data:function(){return{showStandard:!1}}}},PDCp:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"",""])},VB84:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,".procurement[data-v-9c342368]{position:relative;overflow:hidden}.standard-enter-active[data-v-9c342368],.standard-leave-active[data-v-9c342368]{-webkit-transition:all .3s ease;transition:all .3s ease;left:30%!important}.standard-enter[data-v-9c342368],.standard-leave-to[data-v-9c342368]{left:100%!important}",""])},"Z+s7":function(e,t,r){"use strict";function a(e){r("vGTS")}var s=r("+git"),o=r("/FVi"),i=r("VU/8"),n=a,d=i(s.a,o.a,!1,n,"data-v-3696b49e",null);t.a=d.exports},dX9N:function(e,t,r){var a=r("VB84");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("0c9b7ca8",a,!0)},g7ZD:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"n",function(){return o}),r.d(t,"m",function(){return i}),r.d(t,"j",function(){return n}),r.d(t,"k",function(){return d}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return l}),r.d(t,"l",function(){return u}),r.d(t,"o",function(){return h}),r.d(t,"b",function(){return p}),r.d(t,"h",function(){return f}),r.d(t,"g",function(){return m}),r.d(t,"i",function(){return _}),r.d(t,"t",function(){return w}),r.d(t,"u",function(){return v}),r.d(t,"r",function(){return g}),r.d(t,"s",function(){return E}),r.d(t,"p",function(){return b}),r.d(t,"q",function(){return F}),r.d(t,"f",function(){return y});var a=r("/5sW"),s={search:"banner-search",showAddOrEdit:"banner-showAddOrEdit",refreshListForAdd:"banner-refreshListForAdd",refreshListForEdit:"banner-refreshListForEdit"},o={search:"typeGroup-search",showAddOrEdit:"typeGroup-showAddOrEdit",refreshListForAdd:"typeGroup-refreshListForAdd",refreshListForEdit:"typeGroup-refreshListForEdit"},i={search:"type-search",showAddOrEdit:"type-showAddOrEdit",refreshListForAdd:"type-refreshListForAdd",refreshListForEdit:"type-refreshListForEdit"},n={search:"product-search",add:"product-add",edit:"product-edit"},d={search:"productStandard-search",add:"productStandard-add",edit:"productStandard-edit"},c={search:"order-search"},l={search:"order-other-search",add:"order-other-add",edit:"order-other-edit",delivery:"order-other-delivery",deliveryAfter:"order-other-delivery-after",showAddOrEdit:"order-other-showAddOrEdit"},u={search:"role-search",showAddOrEdit:"role-showAddOrEdit",refreshListForAdd:"role-refreshListForAdd",refreshListForEdit:"role-refreshListForEdit"},h={search:"user-search",showAddOrEdit:"user-showAddOrEdit",refreshListForAdd:"user-refreshListForAdd",refreshListForEdit:"user-refreshListForEdit"},p={search:"customer-search",showAddOrEdit:"customer-showAddOrEdit",refreshListForAdd:"customer-refreshListForAdd",refreshListForEdit:"customer-refreshListForEdit"},f={search:"procurement-plan-search",showAddOrEdit:"procurement-plan-showAddOrEdit",refreshListForAdd:"procurement-plan-refreshListForAdd",refreshListForEdit:"procurement-plan-refreshListForEdit"},m={search:"procurement-detail-search",showAddOrEdit:"procurement-detail-showAddOrEdit",refreshListForAdd:"procurement-detail-refreshListForAdd",refreshListForEdit:"procurement-detail-refreshListForEdit"},_={search:"procurement-quota-search",showAddOrEdit:"procurement-quota-showAddOrEdit",refreshListForAdd:"procurement-quota-refreshListForAdd",refreshListForEdit:"procurement-quota-refreshListForEdit"},w={search:"warehouse-put-search",showAddOrEdit:"warehouse-put-showAddOrEdit",refreshListForAdd:"warehouse-put-refreshListForAdd",refreshListForEdit:"warehouse-put-refreshListForEdit"},v={search:"warehouse-put-detail-search",showAddOrEdit:"warehouse-put-detail-showAddOrEdit",refreshListForAdd:"warehouse-put-detail-refreshListForAdd",refreshListForEdit:"warehouse-put-detail-refreshListForEdit"},g={search:"warehouse-out-search",showAddOrEdit:"warehouse-out-showAddOrEdit",refreshListForAdd:"warehouse-out-refreshListForAdd",refreshListForEdit:"warehouse-out-refreshListForEdit"},E={search:"warehouse-out-search",showAddOrEdit:"warehouse-out-detail-showAddOrEdit",refreshListForAdd:"warehouse-detail-out-refreshListForAdd",refreshListForEdit:"warehouse-detail-out-refreshListForEdit"},b={search:"warehouse-inventory-search",showAddOrEdit:"warehouse-inventory-showAddOrEdit",refreshListForAdd:"warehouse-inventory-refreshListForAdd",refreshListForEdit:"warehouse-inventory-refreshListForEdit"},F={search:"warehouse-inventory-detail-search",showAddOrEdit:"warehouse-inventory-detail-showAddOrEdit",refreshListForAdd:"warehouse-inventory-detail-refreshListForAdd",refreshListForEdit:"warehouse-inventory-detail-refreshListForEdit"},y={search:"pay-order-search",showAddOrEdit:"pay-order-showAddOrEdit",refreshListForAdd:"pay-order-refreshListForAdd",refreshListForEdit:"pay-order-refreshListForEdit",errorRefresh:"pay-order-errorRefresh"};t.c=new a.default},vGTS:function(e,t,r){var a=r("PDCp");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("b4e57e44",a,!0)},ySrP:function(e,t,r){"use strict";function a(e){r("Jzhs")}var s=r("0Nov"),o=r("FjYk"),i=r("VU/8"),n=a,d=i(s.a,o.a,!1,n,"data-v-5fb11414",null);t.a=d.exports}});