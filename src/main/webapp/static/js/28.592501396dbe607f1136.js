webpackJsonp([28],{"8Wnm":function(t,e,a){"use strict";function o(t){a("E0Xq"),a("Jw7e")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("bvFa"),i=a("dXmY"),u=a("VU/8"),s=o,l=u(r.a,i.a,!1,s,"data-v-05bd687b",null);e.default=l.exports},"9Kyr":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".avatar-uploader-icon[data-v-05bd687b]{font-size:15px;border:1px solid #bfcbd9;padding:14px 17px;border-radius:5px}.avatar-img[data-v-05bd687b]{max-width:60px}",""])},E0Xq:function(t,e,a){var o=a("9Kyr");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("3459d1ca",o,!0)},Jw7e:function(t,e,a){var o=a("b3IS");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("683abcac",o,!0)},b3IS:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".el-cascader,.el-select{width:100%}.input-new-tag.el-input{width:auto}span.el-tag{margin-right:10px}.el-upload--picture-card,.el-upload-list--picture-card .el-upload-list__item{width:150px;height:150px}.el-upload--picture-card{line-height:150px}",""])},bvFa:function(t,e,a){"use strict";var o=a("woOf"),r=a.n(o),i=a("g7ZD");e.a={components:{},name:"procurementDetailAddOrEdit",props:["showDialog","editRowId","putId"],mounted:function(){this.show()},data:function(){return{addKeywords:"",resetForm:{},putWarehouseDetail:{},options:[],on_off:{tempProductInfoLoading:!1},tempProductStandardsInfo:[],tempProduct:{},tempProductsInfo:[]}},methods:{deleteKeywords:function(t){this.procurementDetail.keywords.splice(this.procurementDetail.keywords.indexOf(t),1)},handleKeywordsConfirm:function(){var t=this.addKeywords;t&&this.procurementDetail.keywords.push(t),this.isAddKeywordsShow=!1,this.addKeywords=""},showAddKeywords:function(){var t=this;this.isAddKeywordsShow=!0,this.$nextTick(function(e){t.$refs.addKeywordsInput.$refs.input.focus()})},handleRemoveImg:function(t,e){this._imgUploadChange(e)},reset:function(){this.$refs.form&&this.$refs.form.resetFields(),this.procurementDetail=r()({},this.resetForm)},show:function(){var t=this;this.reset(),this.getAllSaleUserInfo(),null!==this.editRowId&&this.$http.post("/manage/warehouse/put/detail/getPutWarehouseById",{id:this.editRowId},{showLoading:!0}).then(function(e){t.putWarehouseDetail=e.data}).catch(function(){t.$emit("update:showDialog",!1)})},getAllSaleUserInfo:function(){var t=this;this.$http.post("/manage/procurement/plan/detail/getAllProcurementUser").then(function(e){t.options=e.data})},warningMsg:function(t){this.$message({message:t,type:"warning"})},submitBefore:function(){},onSubmit:function(){var t=this;null==this.editRowId&&null!=this.putId&&(this.putWarehouseDetail.put_id=this.putId),this.$http.post("/manage/warehouse/put/detail/updatePutDetail",this.putWarehouseDetail).then(function(e){null!=t.editRowId?(t.$emit("update:showDialog",!1),i.c.$emit(i.u.showAddOrEdit)):(t.$emit("update:showDialog",!1),i.c.$emit(i.u.refreshListForAdd))})},selectProductStandard:function(t){for(var e=this.tempProductStandardsInfo,a=0;a<e.length;a++)if(e[a].product_standard_id===t){this.tempProduct=r()({},this.tempProduct,e[a]);break}},selectProduct:function(t){for(var e=this,a=this.tempProductsInfo,o=0;o<a.length;o++)if(a[o].product_id===t){this.tempProduct=r()({},this.tempProduct,a[o]);break}this.$http.post("/manage/order/getProductIdStandardsInfo",{productId:t}).then(function(t){e.tempProductStandardsInfo=t.data,e.on_off.isSelectProduct=!0})},productSearch:function(t){var e=this;""!==t?(this.on_off.tempProductInfoLoading=!0,this.$http.post("/manage/order/getProductInfoByQuery",{queryString:t}).then(function(t){e.on_off.tempProductInfoLoading=!1,e.tempProductsInfo=t.data})):this.tempProductsInfo=""}},watch:{putWarehouseDetail:{handler:function(t,e){var a=!1,o=!1,r=!1,i=0,u=0;/^\+?[1-9][0-9]*$/.test(t.put_num)||(a=!0),/^[0-9]+(.[0-9]{1})?$/.test(t.procurement_price)||(o=!0),/^[0-9]+(.[0-9]{1})?$/.test(t.booth_cost)||(r=!0),i=(!0===a?0:t.put_num)*(!0===o?0:100*t.procurement_price)/100,u=((0===i?0:100*i)+(!0===r?0:100*t.booth_cost))/(100*(!0===a?0:t.put_num)),this.putWarehouseDetail.procurement_total_price=i,!isNaN(u)&&isFinite(u)?this.putWarehouseDetail.put_average_price=Math.round(u):this.putWarehouseDetail.put_average_price=0},deep:!0}}}},dXmY:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"入库单编辑/添加",visible:t.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$emit("update:showDialog",e)},open:t.show,close:t.reset}},[a("el-form",{ref:"form",staticClass:"form-style",attrs:{model:t.putWarehouseDetail,"label-width":"100px","label-position":"right"}},[null!==this.editRowId?a("el-form-item",{attrs:{label:"编号",prop:"id"}},[t._v(t._s(t.putWarehouseDetail.id))]):t._e(),t._v(" "),null===this.editRowId?a("el-form-item",{attrs:{size:"mini",label:"商品"}},[a("el-select",{attrs:{filterable:"",remote:"","remote-method":t.productSearch,placeholder:"请输入关键词",loading:t.on_off.tempProductInfoLoading},on:{change:t.selectProduct},model:{value:t.putWarehouseDetail.product_id,callback:function(e){t.$set(t.putWarehouseDetail,"product_id",e)},expression:"putWarehouseDetail.product_id"}},t._l(t.tempProductsInfo,function(t){return a("el-option",{key:t.product_id,attrs:{label:t.product_name+"["+t.brand+"]",value:t.product_id}})}))],1):t._e(),t._v(" "),null===this.editRowId?a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.tempProduct.product_id,expression:"tempProduct.product_id"}],attrs:{size:"mini",label:"规格"}},[a("el-select",{attrs:{placeholder:"请输入关键词"},on:{change:t.selectProductStandard},model:{value:t.putWarehouseDetail.product_standard_id,callback:function(e){t.$set(t.putWarehouseDetail,"product_standard_id",e)},expression:"putWarehouseDetail.product_standard_id"}},t._l(t.tempProductStandardsInfo,function(t){return a("el-option",{key:t.product_standard_id,attrs:{label:t.product_standard_name+"["+t.product_standard_id+"]",value:t.product_standard_id}})}))],1):t._e(),t._v(" "),null!==this.editRowId?a("el-form-item",{attrs:{label:"商品名称",prop:"product_name"}},[a("span",{model:{value:t.putWarehouseDetail.product_name,callback:function(e){t.$set(t.putWarehouseDetail,"product_name",e)},expression:"putWarehouseDetail.product_name"}},[t._v(t._s(t.putWarehouseDetail.product_name))])]):t._e(),t._v(" "),null!==this.editRowId?a("el-form-item",{attrs:{label:"规格名称",prop:"product_standard_name"}},[a("span",{model:{value:t.putWarehouseDetail.product_standard_name,callback:function(e){t.$set(t.putWarehouseDetail,"product_standard_name",e)},expression:"putWarehouseDetail.product_standard_name"}},[t._v(t._s(t.putWarehouseDetail.product_standard_name))])]):t._e(),t._v(" "),null!==this.editRowId?a("el-form-item",{attrs:{label:"规格编号",prop:"product_standard_id"}},[a("span",{model:{value:t.putWarehouseDetail.product_standard_id,callback:function(e){t.$set(t.putWarehouseDetail,"product_standard_id",e)},expression:"putWarehouseDetail.product_standard_id"}},[t._v(t._s(t.putWarehouseDetail.product_standard_id))])]):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"重量斤",prop:"product_weight"}},[a("el-input",{attrs:{placeholder:"请输入重量"},model:{value:t.putWarehouseDetail.product_weight,callback:function(e){t.$set(t.putWarehouseDetail,"product_weight",e)},expression:"putWarehouseDetail.product_weight"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"采购单价",prop:"procurement_price"}},[a("el-input",{attrs:{placeholder:"请输入采购单价"},model:{value:t.putWarehouseDetail.procurement_price,callback:function(e){t.$set(t.putWarehouseDetail,"procurement_price",e)},expression:"putWarehouseDetail.procurement_price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"采购总价",prop:"procurement_total_price"}},[a("span",{model:{value:t.putWarehouseDetail.procurement_total_price,callback:function(e){t.$set(t.putWarehouseDetail,"procurement_total_price",e)},expression:"putWarehouseDetail.procurement_total_price"}},[t._v(t._s(t.putWarehouseDetail.procurement_total_price))])]),t._v(" "),a("el-form-item",{attrs:{label:"摊位费",prop:"booth_cost"}},[a("el-input",{attrs:{placeholder:"请输入摊位费"},model:{value:t.putWarehouseDetail.booth_cost,callback:function(e){t.$set(t.putWarehouseDetail,"booth_cost",e)},expression:"putWarehouseDetail.booth_cost"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"入库数量",prop:"put_num"}},[a("el-input",{attrs:{placeholder:"请输入库存数量"},model:{value:t.putWarehouseDetail.put_num,callback:function(e){t.$set(t.putWarehouseDetail,"put_num",e)},expression:"putWarehouseDetail.put_num"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"入库单价",prop:"put_average_price"}},[a("span",{model:{value:t.putWarehouseDetail.put_average_price,callback:function(e){t.$set(t.putWarehouseDetail,"put_average_price",e)},expression:"putWarehouseDetail.put_average_price"}},[t._v(t._s(t.putWarehouseDetail.put_average_price))])]),t._v(" "),a("el-form-item",{attrs:{label:"采购人",prop:"procurement_id"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.putWarehouseDetail.procurement_id,callback:function(e){t.$set(t.putWarehouseDetail,"procurement_id",e)},expression:"putWarehouseDetail.procurement_id"}},t._l(t.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"入库备注",prop:"put_remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入采购备注"},model:{value:t.putWarehouseDetail.put_remark,callback:function(e){t.$set(t.putWarehouseDetail,"put_remark",e)},expression:"putWarehouseDetail.put_remark"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.$emit("update:showDialog",!1)}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)},r=[],i={render:o,staticRenderFns:r};e.a=i}});