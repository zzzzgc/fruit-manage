webpackJsonp([34],{"/nRn":function(e,t,s){t=e.exports=s("FZ+f")(!1),t.push([e.i,"li[data-v-0c3d3be5]{list-style-type:none}.pay-order-item-header[data-v-0c3d3be5]{-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.pay-order-item-header[data-v-0c3d3be5],.pay-order-item-header ul[data-v-0c3d3be5]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal}.pay-order-item-header ul[data-v-0c3d3be5]{-webkit-box-flex:1;-ms-flex:1;flex:1;height:32px;line-height:32px;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:distribute;justify-content:space-around;background-color:#e3e3e3}.pay-order-item-header ul li[data-v-0c3d3be5]{-webkit-box-flex:1;-ms-flex:1;flex:1;color:#666}",""])},MA4g:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:"订单支付",width:"60%",visible:e.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$emit("update:showDialog",t)},close:e.reset,open:e.show}},[s("el-form",{ref:"form",staticStyle:{"line-height":"34px"},attrs:{form:e.form,model:e.form,"label-position":"right"}},[s("div",{staticStyle:{"margin-top":"0"}},[s("span",[e._v("订单号:"+e._s(e.orderInfo.order_id))]),e._v(" "),s("span",{staticStyle:{display:"inline-block","margin-left":"5%"}},[e._v("订单状态："+e._s(e.orderInfo.order_status))]),e._v(" "),s("span",{staticStyle:{display:"inline-block","margin-left":"5%"}},[e._v("下单时间:"+e._s(e.orderInfo.create_time))])]),e._v(" "),s("div",[s("span",{staticStyle:{display:"inline-block"}},[e._v(e._s(e.orderInfo.business_name)+"["+e._s(e.orderInfo.business_info_id)+"]")]),e._v(" "),s("span",[e._v(e._s(e.orderInfo.address))]),e._v(" "),s("span",{staticStyle:{display:"inline-block","margin-left":"5%"}},[e._v("联系人："+e._s(e.businessUser.name))]),e._v(" "),s("span",{staticStyle:{display:"inline-block","margin-left":"5%"}},[e._v("联系电话："+e._s(e.businessInfo.phone))])]),e._v(" "),s("div",[s("span",[e._v("销售："+e._s(e.orderInfo.a_user_sales))])]),e._v(" "),s("div",[s("span",{staticStyle:{display:"inline-block",color:"red"}},[e._v("总价：￥"+e._s(e.allTotalCost))]),e._v(" "),s("span",{staticStyle:{display:"inline-block","margin-left":"5%"}},[e._v("付款状态：未付")])]),e._v(" "),s("div",[s("span",{staticStyle:{color:"red"}},[e._v("实收：￥"+e._s(e.reallyPayMoney))])])]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"26px"},attrs:{type:"info",size:"small"},on:{click:e.addPayMoney}},[e._v("新增付款")]),e._v(" "),s("div",{staticClass:"pay-order-item-header"},[s("ul",[s("li",[e._v("金额")]),e._v(" "),s("li",[e._v("支付方式")]),e._v(" "),s("li",[e._v("支付时间")]),e._v(" "),s("li",[e._v("凭证")])])]),e._v(" "),e._l(e.payOrderInfos,function(t,o){return s("el-container",{key:o,staticClass:"pay-order-item"},[s("el-container",[s("el-form",{staticStyle:{width:"96%"}},[s("ul",{staticStyle:{display:"flex",width:"100%"}},[s("li",{staticStyle:{flex:"1"}},[s("span",[e._v(e._s(t.pay_the_money))])]),e._v(" "),s("li",{staticStyle:{flex:"1"}},[s("span",[e._v(e._s(0===t.pay_of_type?"微信支付":1===t.pay_of_type?"支付宝付款":"银行转账"))])]),e._v(" "),s("li",{staticStyle:{flex:"1"}},[s("span",[e._v(e._s(t.pay_of_time))])]),e._v(" "),s("li",{staticStyle:{flex:"1"}},[s("span",[e._v("暂无")])])])])],1)],1)}),e._v(" "),s("span",{attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.cancelAdd}},[e._v("确认")])],1),e._v(" "),s(e.editCompName,{tag:"component",attrs:{showDialog2:e.showAddPayOrder,editRowId:e.editRowId,orderInfo:e.orderInfo,payOrderInfo2:e.payOrderInfo2},on:{"update:showDialog2":function(t){e.showAddPayOrder=t}}})],2)},i=[],r={render:o,staticRenderFns:i};t.a=r},Sflp:function(e,t,s){"use strict";var o=s("mvHQ"),i=s.n(o),r=s("woOf"),a=s.n(r),n=s("g7ZD");t.a={components:{addOrEditPayOrder:function(e){s.e(24).then(function(){var t=[s("3BJG")];e.apply(null,t)}.bind(this)).catch(s.oe)}},created:function(){var e=this;n.c.$on(n.f.search,function(e){}),n.c.$on(n.f.showAddOrEdit,function(t){e.show(),e.successMsg("添加成功")})},name:"delivery",data:function(){return{form:{products:[]},payOrderInfo2:{order_id:"",sale_id:0,user_id:0},allTotalCost:0,businessInfo:{},businessUser:{},reallyPayMoney:0,payOrderInfos:[],showAddPayOrder:!1,editCompName:""}},props:["showDialog","editRowId","orderInfo"],mounted:function(){this.show()},methods:{reset:function(){},warningMsg:function(e){this.$message({message:e,type:"warning"})},successMsg:function(e){this.$message({message:e,type:"success"})},submitBefore:function(){var e=!1;if(null!==this.form.products&&""!==this.form.products&&this.form.products.length>0){var t=0;for(var s in this.form.products)t=1+parseInt(s),/^\+?[1-9][0-9]*$/.test(this.form.products[s].actual_send_goods_num)||(this.warningMsg("第"+t+"个商品的数量输入有误！"),e=!0),parseInt(this.form.products[s].stock)<parseInt(this.form.products[s].actual_send_goods_num)&&(this.warningMsg("第"+t+"个商品的实发数量大于库存！"),e=!0)}return e},submitAddAndEdit:function(){var e=this;if(this.submitBefore())return!1;this.$http.post("/manage/order/save",a()({},this.form,{products:i()(this.form.products),orderId:this.editRowId})).then(function(t){e.$http.post("/manage/order/setStatus",{isNext:1,orderId:e.editRowId}).then(function(t){e.$emit("update:showDialog",!1),e.editRowId&&n.c.$emit(n.f.search,a()({},e.orderInfo))})})},show:function(){var e=this;this.reset(),this.$http.post("/manage/order/getLogisticsCost",{orderId:this.orderInfo.order_id,businessUserId:this.orderInfo.business_user_id}).then(function(t){e.allTotalCost=t.data[0],e.businessInfo=t.data[1],e.businessUser=t.data[2],e.reallyPayMoney=t.data[3],e.payOrderInfos=t.data[4],e.allTotalCost===e.reallyPayMoney&&e.$http.post("/manage/order/updatePayStatusByOrderId",{orderId:e.orderInfo.order_id}).then(function(t){e.$emit("update:showDialog",!1),n.c.$emit(n.f.search,a()({},e.orderInfo))})}).catch(function(t){e.$emit("update:showDialog",!1),n.c.$emit(n.f.errorRefresh,a()({},e.orderInfo))})},cancelAdd:function(){this.$emit("update:showDialog",!1)},addPayMoney:function(){this.editCompName="addOrEditPayOrder",this.rowId=null,this.payOrderInfo2.order_id=this.orderInfo.order_id,this.payOrderInfo2.user_id=this.businessUser.id,this.payOrderInfo2.sale_id=this.businessUser.a_user_sales_id,this.payOrderInfo2.allTotalCost=this.allTotalCost,this.payOrderInfo2.reallyPayMoney=this.reallyPayMoney,this.showAddPayOrder=!0}}}},WYOM:function(e,t,s){var o=s("/nRn");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);s("rjj0")("5808c030",o,!0)},"i+Yg":function(e,t,s){"use strict";function o(e){s("WYOM")}Object.defineProperty(t,"__esModule",{value:!0});var i=s("Sflp"),r=s("MA4g"),a=s("VU/8"),n=o,d=a(i.a,r.a,!1,n,"data-v-0c3d3be5",null);t.default=d.exports},mvHQ:function(e,t,s){e.exports={default:s("qkKv"),__esModule:!0}},qkKv:function(e,t,s){var o=s("FeBl"),i=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}}});