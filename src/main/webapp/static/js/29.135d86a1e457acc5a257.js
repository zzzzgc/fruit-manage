webpackJsonp([29],{"4kIR":function(t,e,n){"use strict";var o=n("woOf"),i=n.n(o),r=n("g7ZD");e.a={components:{},name:"warehouseInventoryDetailAddOrEdit",props:["showDialog","editRowId","putId"],mounted:function(){this.show()},data:function(){return{addKeywords:"",resetForm:{},inventoryDetail:{},options:[],on_off:{tempProductInfoLoading:!1},tempProductStandardsInfo:[],tempProduct:{},tempProductsInfo:[]}},methods:{deleteKeywords:function(t){this.procurementDetail.keywords.splice(this.procurementDetail.keywords.indexOf(t),1)},handleKeywordsConfirm:function(){var t=this.addKeywords;t&&this.procurementDetail.keywords.push(t),this.isAddKeywordsShow=!1,this.addKeywords=""},showAddKeywords:function(){var t=this;this.isAddKeywordsShow=!0,this.$nextTick(function(e){t.$refs.addKeywordsInput.$refs.input.focus()})},handleRemoveImg:function(t,e){this._imgUploadChange(e)},reset:function(){this.$refs.form&&this.$refs.form.resetFields(),this.procurementDetail=i()({},this.resetForm)},show:function(){var t=this;this.reset(),this.getAllSaleUserInfo(),null!==this.editRowId&&this.$http.post("/manage/warehouse/inventory/detail/getCheckInventoryById",{id:this.editRowId},{showLoading:!0}).then(function(e){t.inventoryDetail=e.data}).catch(function(){t.$emit("update:showDialog",!1)})},getAllSaleUserInfo:function(){var t=this;this.$http.post("/manage/procurement/plan/detail/getAllProcurementUser").then(function(e){t.options=e.data})},warningMsg:function(t){this.$message({message:t,type:"warning"})},submitBefore:function(){},onSubmit:function(){var t=this;null==this.editRowId&&null!=this.putId&&(this.inventoryDetail.put_id=this.putId),this.$http.post("/manage/warehouse/inventory/detail/updateInventoryDetail",this.inventoryDetail).then(function(e){null!=t.editRowId?(t.$emit("update:showDialog",!1),r.c.$emit(r.q.showAddOrEdit)):(t.$emit("update:showDialog",!1),r.c.$emit(r.q.refreshListForAdd))})},selectProductStandard:function(t){for(var e=this.tempProductStandardsInfo,n=0;n<e.length;n++)if(e[n].product_standard_id===t){this.tempProduct=i()({},this.tempProduct,e[n]);break}},selectProduct:function(t){for(var e=this,n=this.tempProductsInfo,o=0;o<n.length;o++)if(n[o].product_id===t){this.tempProduct=i()({},this.tempProduct,n[o]);break}this.$http.post("/manage/order/getProductIdStandardsInfo",{productId:t}).then(function(t){e.tempProductStandardsInfo=t.data,e.on_off.isSelectProduct=!0})},productSearch:function(t){var e=this;""!==t?(this.on_off.tempProductInfoLoading=!0,this.$http.post("/manage/order/getProductInfoByQuery",{queryString:t}).then(function(t){e.on_off.tempProductInfoLoading=!1,e.tempProductsInfo=t.data})):this.tempProductsInfo=""}},watch:{inventoryDetail:{handler:function(t,e){var n=!1,o=!1,i=!1,r=0,a=0;/^\+?[1-9][0-9]*$/.test(t.put_num)||(n=!0),/^[0-9]+(.[0-9]{1})?$/.test(t.procurement_price)||(o=!0),/^[0-9]+(.[0-9]{1})?$/.test(t.booth_cost)||(i=!0),r=(!0===n?0:t.put_num)*(!0===o?0:100*t.procurement_price)/100,a=((0===r?0:100*r)+(!0===i?0:100*t.booth_cost))/(100*(!0===n?0:t.put_num)),this.inventoryDetail.procurement_total_price=r,!isNaN(a)&&isFinite(a)?this.inventoryDetail.put_average_price=Math.round(a):this.inventoryDetail.put_average_price=0},deep:!0}}}},"6Psk":function(t,e,n){"use strict";function o(t){n("pAt2"),n("MScT")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("4kIR"),r=n("SBWX"),a=n("VU/8"),s=o,l=a(i.a,r.a,!1,s,"data-v-73175be4",null);e.default=l.exports},MScT:function(t,e,n){var o=n("sqfA");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("68516b54",o,!0)},SBWX:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"入库单编辑/添加",visible:t.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$emit("update:showDialog",e)},open:t.show,close:t.reset}},[n("el-form",{ref:"form",staticClass:"form-style",attrs:{model:t.inventoryDetail,"label-width":"100px","label-position":"right"}},[null!==this.editRowId?n("el-form-item",{attrs:{label:"编号",prop:"id"}},[t._v(t._s(t.inventoryDetail.id))]):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"商品名称",prop:"product_name"}},[n("span",{model:{value:t.inventoryDetail.product_name,callback:function(e){t.$set(t.inventoryDetail,"product_name",e)},expression:"inventoryDetail.product_name"}},[t._v(t._s(t.inventoryDetail.product_name))])]),t._v(" "),n("el-form-item",{attrs:{label:"规格名称",prop:"product_standard_name"}},[n("span",{model:{value:t.inventoryDetail.product_standard_name,callback:function(e){t.$set(t.inventoryDetail,"product_standard_name",e)},expression:"inventoryDetail.product_standard_name"}},[t._v(t._s(t.inventoryDetail.product_standard_name))])]),t._v(" "),n("el-form-item",{attrs:{label:"规格编号",prop:"product_standard_id"}},[n("span",{model:{value:t.inventoryDetail.product_standard_id,callback:function(e){t.$set(t.inventoryDetail,"product_standard_id",e)},expression:"inventoryDetail.product_standard_id"}},[t._v(t._s(t.inventoryDetail.product_standard_id))])]),t._v(" "),n("el-form-item",{attrs:{label:"重量斤",prop:"product_weight"}},[n("span",{model:{value:t.inventoryDetail.product_weight,callback:function(e){t.$set(t.inventoryDetail,"product_weight",e)},expression:"inventoryDetail.product_weight"}},[t._v(t._s(t.inventoryDetail.product_weight))])]),t._v(" "),n("el-form-item",{attrs:{label:"库存数量",prop:"inventory_num"}},[n("el-input",{attrs:{placeholder:"请输入库存数量"},model:{value:t.inventoryDetail.inventory_num,callback:function(e){t.$set(t.inventoryDetail,"inventory_num",e)},expression:"inventoryDetail.inventory_num"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"库存单价",prop:"inventory_price"}},[n("span",{model:{value:t.inventoryDetail.inventory_price,callback:function(e){t.$set(t.inventoryDetail,"inventory_price",e)},expression:"inventoryDetail.inventory_price"}},[t._v(t._s(t.inventoryDetail.inventory_price))])]),t._v(" "),n("el-form-item",{attrs:{label:"库存总额",prop:"inventory_total_price"}},[n("span",{model:{value:t.inventoryDetail.inventory_total_price,callback:function(e){t.$set(t.inventoryDetail,"inventory_total_price",e)},expression:"inventoryDetail.inventory_total_price"}},[t._v(t._s(t.inventoryDetail.inventory_total_price))])]),t._v(" "),n("el-form-item",{attrs:{label:"盘点人",prop:"user_name"}},[n("el-input",{attrs:{placeholder:"请输入库存数量"},model:{value:t.inventoryDetail.user_name,callback:function(e){t.$set(t.inventoryDetail,"user_name",e)},expression:"inventoryDetail.user_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"备注",prop:"procurement_id"}},[n("el-input",{attrs:{placeholder:"请输入备注",type:"textarea"},model:{value:t.inventoryDetail.inventory_remark,callback:function(e){t.$set(t.inventoryDetail,"inventory_remark",e)},expression:"inventoryDetail.inventory_remark"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.$emit("update:showDialog",!1)}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)},i=[],r={render:o,staticRenderFns:i};e.a=r},ctdx:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".avatar-uploader-icon[data-v-73175be4]{font-size:15px;border:1px solid #bfcbd9;padding:14px 17px;border-radius:5px}.avatar-img[data-v-73175be4]{max-width:60px}",""])},pAt2:function(t,e,n){var o=n("ctdx");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n("rjj0")("15003240",o,!0)},sqfA:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".el-cascader,.el-select{width:100%}.input-new-tag.el-input{width:auto}span.el-tag{margin-right:10px}.el-upload--picture-card,.el-upload-list--picture-card .el-upload-list__item{width:150px;height:150px}.el-upload--picture-card{line-height:150px}",""])}});