webpackJsonp([14],{"/lbB":function(e,t,r){"use strict";var a=r("HzJ8"),o=r.n(a),s=r("aA9S"),i=r.n(s),l=r("4YfN"),u=r.n(l),d=r("g7ZD"),c=r("JaHG"),p=r("+UIE"),n=r("9rMa");t.a={name:"market",props:["showDialog","editRowId"],mounted:function(){this.show()},data:function(){return{product:{},resetForm:{id:"",product_id:"",buy_suggest:"",market_feedback:1,supply_goods:1,fruit_des:"",support_des:"",remark:"",imgs:[]},productMarket:{},rules:{buy_suggest:[{required:!1,message:"",trigger:"blur,change"},{min:2,max:50,message:"长度在 2 到100 个字符之间",trigger:"blur,change"}],fruit_des:[{required:!0,message:"请填写果质特点",trigger:"blur,change"},{min:2,max:50,message:"长度在 2 到255 个字符之间"}]}}},computed:Object(n.c)({productStore:"product"}),methods:u()({},Object(n.b)({getTypes:p.f}),{reset:function(){this.$refs.form&&this.$refs.form.resetFields(),this.product={},this.productMarket=i()({},this.resetForm)},show:function(){var e=this;this.reset(),null!==this.editRowId&&this.$http.post("/productMarket/info",{productId:this.editRowId},{showLoading:!0}).then(function(t){var r=[];if(t.data.imgs){var a=!0,s=!1,l=void 0;try{for(var u,d=o()(t.data.imgs);!(a=(u=d.next()).done);a=!0){var p=u.value;r.push({url:p.img_url})}}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}delete t.data.imgs}t.data.productName&&(e.product.name=t.data.productName,delete t.data.productName),e.productMarket=i()(e.resetForm,{product_id:e.editRowId},Object(c.c)(t.data),{imgs:r})}).catch(function(t){e.$emit("update:showDialog",!1)})},handleRemoveImg:function(e,t){this._imgUploadChange(t)},handleAvatarScucess:function(e,t,r){e?this._imgUploadChange(r):this.$message.error("该图片不支持上传，请更换一张！")},beforeAvatarUpload:function(e){var t=0===e.type.indexOf("image/");t||this.$message.error("上传图标必须为图片格式!");var r=e.size/1024/1024<5;return r||this.$message.error("上传图标大小不能超过 5MB!"),r&&t},_imgUploadChange:function(e){this.productMarket.imgs=[];var t=!0,r=!1,a=void 0;try{for(var s,i=o()(e);!(t=(s=i.next()).done);t=!0){var l=s.value;this.productMarket.imgs.push({url:l.response||l.url})}}catch(e){r=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw a}}},onSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var r=[],a=!0,s=!1,l=void 0;try{for(var u,c=o()(e.productMarket.imgs);!(a=(u=c.next()).done);a=!0){var p=u.value;r.push(p.url)}}catch(e){s=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}var n=i()({},e.productMarket,{imgs:r});e.$http.post("/productMarket/save",n,{showLoading:!0}).then(function(t){e.$emit("update:showDialog",!1),e.$message({type:"success",message:"编辑数据成功"}),d.b.$emit(d.d.edit,n)})})}})}},"6LiT":function(e,t,r){var a=r("Fm+c");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("8bSs")("2d5b731a",a,!0)},"7waU":function(e,t,r){t=e.exports=r("BkJT")(!1),t.push([e.i,".el-cascader,.el-select{width:100%}.el-upload--picture-card,.el-upload-list--picture-card .el-upload-list__item{width:150px;height:150px}.el-upload--picture-card{line-height:150px}",""])},"8SaM":function(e,t,r){var a=r("7waU");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("8bSs")("46ce83e8",a,!0)},"8UIp":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"行情添加/编辑",visible:e.showDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$emit("update:showDialog",t)},open:e.show,close:e.reset}},[r("el-form",{ref:"form",staticClass:"form-style",attrs:{model:e.productMarket,rules:e.rules,"label-width":"100px","label-position":"right"}},[r("el-form-item",{attrs:{label:"商品名",prop:"name"}},[e._v(e._s(e.product.name))]),e._v(" "),r("el-form-item",{attrs:{label:"平台建议",prop:"buy_suggest"}},[r("el-input",{model:{value:e.productMarket.buy_suggest,callback:function(t){e.$set(e.productMarket,"buy_suggest",t)},expression:"productMarket.buy_suggest"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"市场反馈",prop:"market_feedback"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.productMarket.market_feedback,callback:function(t){e.$set(e.productMarket,"market_feedback",t)},expression:"productMarket.market_feedback"}},e._l(e.productStore.marketFeedbackList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"供货",prop:"supply_goods"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.productMarket.supply_goods,callback:function(t){e.$set(e.productMarket,"supply_goods",t)},expression:"productMarket.supply_goods"}},e._l(e.productStore.supplyGoodsList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"果质特点",prop:"fruit_des"}},[r("el-input",{model:{value:e.productMarket.fruit_des,callback:function(t){e.$set(e.productMarket,"fruit_des",t)},expression:"productMarket.fruit_des"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"服务支持",prop:"support_des"}},[r("el-input",{model:{value:e.productMarket.support_des,callback:function(t){e.$set(e.productMarket,"support_des",t)},expression:"productMarket.support_des"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"其他",prop:"remark"}},[r("el-input",{model:{value:e.productMarket.remark,callback:function(t){e.$set(e.productMarket,"remark",t)},expression:"productMarket.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"图片",prop:"imgs"}},[r("el-upload",{attrs:{action:e._uploadFilePath,"list-type":"picture-card",limit:20,"file-list":e.productMarket.imgs,"on-remove":e.handleRemoveImg,"on-success":e.handleAvatarScucess,"before-upload":e.beforeAvatarUpload}},[r("i",{staticClass:"el-icon-plus"})])],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.$emit("update:showDialog",!1)}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确 定")])],1)],1)},o=[],s={render:a,staticRenderFns:o};t.a=s},"Fm+c":function(e,t,r){t=e.exports=r("BkJT")(!1),t.push([e.i,".avatar-uploader-icon[data-v-64c3b4b5]{font-size:15px;border:1px solid #bfcbd9;padding:14px 17px;border-radius:5px}.avatar-img[data-v-64c3b4b5]{max-width:60px}",""])},hA0w:function(e,t,r){"use strict";function a(e){r("6LiT"),r("8SaM")}Object.defineProperty(t,"__esModule",{value:!0});var o=r("/lbB"),s=r("8UIp"),i=r("OF7X"),l=a,u=i(o.a,s.a,!1,l,"data-v-64c3b4b5",null);t.default=u.exports}});